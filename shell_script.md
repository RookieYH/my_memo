# Shell Script


- `#!/usr/bin/env bash`，Sha-Bang


## 参数/变量

- `$0`代表脚本文件名，`$#`，传入脚本的参数的个数，`$$`，当前shell进程的pid
- `$1` 代表第一个参数，`$2` 代表第二个，`$3` 代表第三个，以此类推。在 `$9` 之后的参数必须被包含在大括号中，如 `${10}, ${11}, ${12}`，最后一个参数 `${!#}`
- `$*`所有的参数(作为单个字符串)，`$@`，所有的参数数组(每个都作为独立的字符串)
- `shift`，参数整体向左移一位，即原来 $1 的值被移走了，新 $1 的值是原来 $2 的值，新 $2 的值是原来 $3 的值，依次类推，`shift 3`，左移三位
- `$?`，读取最后执行命令的退出状态，一般情况下，0为成功，1-255之间的整数为失败
- `""`包裹字符，可以防止除 **$**，**`**(反引号)和 **\\**(转义符)之外的其他特殊字符被重新解释，可以防止空格被解释为分隔符，含有空格的字符串被包在双引号中依旧是算作单一字符
- `''`包裹字符，除了'之外的所有特殊字符都将会被直接按照字面意思进行解析


- `${变量:位置:要截取的长度}`，字符串截取，位置从0开始，`${变量名:位置起点}`，从起点开始取到末尾，`${#变量名称}`计算变量值字符串的长度
- `${var/1234/1111}`， 如果变量中有符合样式的字符串，则使用替换字符串替代，只替换第一个符合样式的字符串，`${变量//样式/替换字符串}`，如果变量中有符合样式的字符串，则使用替换字符串替代，替换全部符合样式的字符串

## 进程

- `./script-name`，`(cd ..; ls -l)`，如果默认方式执行脚本，或将命令行下输入的命令用括号括起来，那么会 fork 出一个子 shell 执行小括号中的命令，一行中可以输入由分号隔开的多个命令，执行命令后，虽然执行了 cd .. 命令，但是 shell 当前的路径并没改变
- `source ./script-name`，`. ./script-name `，如果用 source 命令或者 . 来执行脚本时，则不会创建子进程，而是直接在交互式 shell 中执行脚本中的命令
- `firefox&`，最后后面的 & 符号，表示使用后台方式打开 Firefox，然后显示该进程的 PID 值